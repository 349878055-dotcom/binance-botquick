部署命令 (已全部修正)
请在你的本地终端中，一个一个复制并执行以下命令：
步骤 1: 本地重新打包 nowcore 项目
首先，切换到你的 quick 目录：
cd C:\Users\jintao\Desktop\myfile\quick\
然后执行打包命令：
tar -czvf nowcore.tar.gz -C . nowcore
步骤 2: 清理云端环境
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" ubuntu@13.115.197.173"set -ex; echo `"[REMOTE] Killing existing processes...`"; sudo pkill -9 nowcore_executable || true; echo `"[REMOTE] Removing old source and run directories...`"; rm -rf /home/ubuntu/nowcore_source /home/ubuntu/nowcore_run; echo `"[REMOTE] Clearing OS caches...`"; sudo sync && echo 3 | sudo tee /proc/sys/vm/drop_caches"
步骤 3: 在云端建立源代码文件夹
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" ubuntu@13.115.197.173"set -ex; echo `"[REMOTE] Creating source directory...`"; mkdir -p /home/ubuntu/nowcore_source"
步骤 4: 传输打包文件到云端
请确保你的本地终端当前目录是 C:\Users\jintao\Desktop\myfile\quick\。
scp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" "nowcore.tar.gz" ubuntu@3.112.123.200:/home/ubuntu/nowcore_source/
步骤 5: 云端解压
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" ubuntu@13.115.197.173"set -ex; echo `"[REMOTE] Extracting tarball...`"; tar -xzvf /home/ubuntu/nowcore_source/nowcore.tar.gz -C /home/ubuntu/nowcore_source"
步骤 6: 云端编译 (已修正 nproc 部分)
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" ubuntu@13.115.197.173"set -ex; echo `"[REMOTE] Creating run directory...`"; mkdir -p /home/ubuntu/nowcore_run; echo `"[REMOTE] Changing to source directory for compilation...`"; cd /home/ubuntu/nowcore_source/nowcore; echo `"[REMOTE] Running CMake...`"; cmake .; echo `"[REMOTE] Running Make...`"; make -j`$(nproc)`; echo `"[REMOTE] Copying executable...`"; cp nowcore /home/ubuntu/nowcore_run/nowcore_executable"
步骤 7: 云端执行程序
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" ubuntu@13.115.197.173"set -ex; echo `"[REMOTE] Setting capabilities for executable...`"; sudo setcap cap_net_raw,cap_net_admin,cap_sys_nice+eip /home/ubuntu/nowcore_run/nowcore_executable; echo `"[REMOTE] Starting executable in background...`"; sudo chrt -f 99 /home/ubuntu/nowcore_run/nowcore_executable > /home/ubuntu/nowcore_run/nowcore_executable_app.log 2>&1 &"
检查程序是否在云端运行 (可选)
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" ubuntu@13.115.197.173"pgrep nowcore_executable"
查看云端日志 (可选)
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i "C:\Users\jintao\Desktop\myfile\quick\toyo.pem" ubuntu@13.115.197.173"tail -f /home/ubuntu/nowcore_run/nowcore_executable_app.log"


好的，我明白你的意思了。我
.\deploy_nowcore.ps1

ssh -i "/home/jintao/文档/myfile/quick/toyo.pem" ubuntu@13.115.197.173
mv titan.py titan_old.py && nano titan.py
tail -n 20 titan.log因果保真" (Log Heartbeat)
watch -n 1 "du -sh ./binance_raw_data"确认"呼吸频率" (IO Speed Check)
ps -ef | grep titan.py  确认"生命体征" (Process Check
echo 'export BINANCE_API_KEY="YXM98FXxAmyzx0OFJfzn7QLxsMRQsEj5TNLo7q4IozaKj51cyANGvQMoKxcHn8zJ"' >> ~/.bashrc
echo 'export BINANCE_API_SECRET="utlwVk5r8fsqEeMZKjyI24AzVDTjBnV9bzxmvOZmT9vyEKeHefWi5hWQEi0p8qWs"' >> ~/.bashrc
# --- OKX 凭证注入区 ---
API_KEY = "84a2fac4-a6d8-4aed-9afa-d0aee7e27ae0"
SECRET_KEY = "82B8EC867F508A6865C65D59A441E0ED"
PASSPHRASE = "Jintao0341$"